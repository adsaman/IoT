<html>
	<head>
		<style>
		body {
			background: #ffffff url("bglogo.png") no-repeat center;
			background-size: contain;
			padding: 0 0 0 0;
			margin: 0 0 0 0;
			overflow: hidden;
		}
		div {
			text-align: center;
		}
		img {
			width: 100%;
		}
    </style>
		<script>
		var newImage = new Image();

		function preload(url) {
			console.log("Preloading image from: " + url);
			newImage.src = url;
		}

		function updateImage() {
			teideImg = document.getElementById("dashboard");

			if (newImage.src && newImage.complete && teideImg.src != newImage.src) {
				console.log("New image available, updating src: " + newImage.src);
				teideImg.src = newImage.src;
				teideImg.removeAttribute("style");
			} else {
				console.log("No new image");
			}

			// Check if new image available each 5s
			setTimeout(updateImage, 5000);
		}

		function loadError(image) {
			console.log("Error loading image");
			image.onerror = "";
			image.style = "display: none";

			return true;
		}

		setTimeout(preload, 300000, "http://pnteide.meteorologia.sieltec.es/PNTeide.png?" + new Date().getTime());
		</script>
	</head>
	<body onload="updateImage()">
		<img id="dashboard" src="http://pnteide.meteorologia.sieltec.es/PNTeide.png" onerror="loadError(this)" />
	</body>
</html>
